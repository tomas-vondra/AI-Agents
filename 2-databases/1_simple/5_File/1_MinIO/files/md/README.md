# Customer Care Chatbot

This project implements a fictive chatbot solution to assist with customer care. Built using *LangChain*, the chatbot can classify and respond to customer inquiries about refunds, exchanges, return policies, product recommendations, and general FAQs. 

It also handles complaints by identifying dissatisfaction or negative experiences, as well as handling unrelated queries.

The chatbot is defaulty using *gpt-4-turbo*. The system prompts are set defaultly to represents a *Bata Shoes* customer care chatbot.

## Question Classification
 
  Uses predefined rules to classify incoming user questions into categories:
  
  - **Complaint:** Negative experiences or dissatisfaction (defaultly related to *Bata Shoes*).
  - **FAQ:** General inquiries, frequently asked questions about refunds, exchanges, returns, recommendations, and other common topics.
  - **Other:** Unrelated questions that do not fit into the above categories.

## How It Works

1. **Question Classification:**  
   When a user asks a question, the chatbot first calls the LLM with `question_system_message` to determine if the query is a `complaint`, an `faq`, or `other`.

2. **Graph Navigation:**  
   Based on the question classification, the chatbot navigates through a predefined graph of nodes. For an `faq`, it transitions to a node that calls the LLM with `faq_system_message` to retrieves a helpful answer.

3. **Response Generation:**  
   The chatbot uses a LLM to generate response for `faq` questions. If the question is classified as `other` (not related to the topic), user is forced to change the question or exit the chat. The `complaints` are answered by human assistents.

## Project Structure
```plaintext
project
├─ requirements.txt     
├─ __main__.py          
├─ README.md           
└─ tools
   ├─ __init__.py 
   ├─ edge.py           # ConditionalEdge class with definition of conditional edges
   ├─ graph.py          # Definition of LangChain graph
   ├─ message.py        # Definition of system messages
   ├─ node.py           # Node class with definition of different node types
   └─ visualizer.py     # Optional tool to visualize the graph structure 
```
## Example Interactions

**Complaint**
- **Input:** I am very unhappy with the quality of the shoes I purchased last week.
- **Classification:** `complaint`
- **Response:** Response is generated by human assistant

**FAQ**
- **Input:** Can I return shoes that I bought online if they don't fit?
- **Classification:** `faq`
- **Response:** Response is generated by LLM

**Other**
- **Input:** What is your favorite color?
- **Classification:** `other`
- **Response:** User is asked to write a new question or type exit to quit the chat


## Getting Started

Developed with Python `3.12.7`.

1. **Create .env file:**

   Put there your `OPENAI_API_KEY`

1. **Install Dependencies:**

   ```bash
   pip install -r requirements.txt
   ```
   
2. **Run the Chatbot:**
   ```bash
   python __main__
   ```

The LLM model can be changed from *gpt-4-turbo* to another model in `__main__.py`. System messages can be customized in `utils/message.py`.

## Note

   The graph visualization is disabled in `__main__.py` right now. The visualization method returns:
   ```bash
   Failed to render the graph using the Mermaid.INK API. Status code: 400.
   ```